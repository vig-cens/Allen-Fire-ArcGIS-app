System.register(["jimu-core"],(function(e,t){var a={};return{setters:[function(e){a.DataSourceComponent=e.DataSourceComponent,a.DataSourceManager=e.DataSourceManager,a.DataSourceStatus=e.DataSourceStatus,a.React=e.React}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=a}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var n={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(n),r.d(n,{__set_webpack_public_path__:()=>o,default:()=>a});var e=r(244),t=function(e,t,a,r){return new(a||(a=Promise))((function(n,o){function c(e){try{i(r.next(e))}catch(e){o(e)}}function l(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,l)}i((r=r.apply(e,t||[])).next())}))};function a(a){var r;const[n,o]=e.React.useState(a.config.zoneId||null),[c,l]=e.React.useState([]),[i,s]=e.React.useState(!1),[u,d]=e.React.useState(null);e.React.useEffect((()=>{a.config.zoneId&&!n&&o(a.config.zoneId)}),[a.config.zoneId,n]);const f=e=>t(this,void 0,void 0,(function*(){s(!0),d(null);try{const t=yield fetch(`https://api.weather.gov/alerts/active/zone/${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=yield t.json();l(a.features||[])}catch(e){console.error("Error fetching alerts:",e),d("Failed to fetch alerts. Please try again later.")}finally{s(!1)}}));return e.React.useEffect((()=>{n?f(n):l([])}),[n]),e.React.createElement("div",{className:"widget-demo jimu-widget"},(null===(r=a.useDataSources)||void 0===r?void 0:r[0])&&e.React.createElement(e.DataSourceComponent,{useDataSource:a.useDataSources[0],onDataSourceStatusChange:t=>{var r;if(t===e.DataSourceStatus.Loaded&&(null===(r=a.useDataSources)||void 0===r?void 0:r[0])){const t=e.DataSourceManager.getInstance().getDataSource(a.useDataSources[0].dataSourceId),r=null==t?void 0:t.getSelectedRecords();if((null==r?void 0:r.length)>0&&a.config.zoneField){console.log(r);const e=r[0].getData()[a.config.zoneField];e!==n&&o(e)}}}}),n&&e.React.createElement("div",{className:"p-3",style:{maxHeight:"400px",overflowY:"auto",overflowX:"hidden"}},e.React.createElement("h3",null,"NOAA Alerts"),e.React.createElement("div",{className:"mt-2"},"Zone ID: ",n),i&&e.React.createElement("div",null,"Loading alerts..."),u&&e.React.createElement("div",{style:{color:"var(--sys-color-error)"}},u),!i&&!u&&0===c.length&&e.React.createElement("div",null,"No active alerts for this zone"),!i&&!u&&c.map(((t,a)=>e.React.createElement("div",{key:a,className:"alert alert-warning mt-2"},e.React.createElement("h5",null,t.properties.event),e.React.createElement("p",null,e.React.createElement("strong",null,"Headline:")," ",t.properties.headline),e.React.createElement("p",null,e.React.createElement("strong",null,"Description:")," ",t.properties.description),e.React.createElement("small",null,"Effective: ",new Date(t.properties.effective).toLocaleString(),e.React.createElement("br",null),"Expires: ",new Date(t.properties.expires).toLocaleString()))))))}function o(e){r.p=e}})(),n})())}}}));