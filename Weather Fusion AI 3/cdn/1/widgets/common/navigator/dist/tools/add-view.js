System.register(["jimu-core","jimu-ui","jimu-for-builder","jimu-layouts/layout-builder"],(function(e,t){var o={},i={},n={},r={};return{setters:[function(e){o.AppMode=e.AppMode,o.LayoutItemType=e.LayoutItemType,o.appActions=e.appActions,o.getAppStore=e.getAppStore,o.i18n=e.i18n,o.jimuHistory=e.jimuHistory,o.lodash=e.lodash},function(e){i.defaultMessages=e.defaultMessages},function(e){n.builderAppSync=e.builderAppSync,n.getAppConfigAction=e.getAppConfigAction,n.placeholderService=e.placeholderService},function(e){r.addItemToLayout=e.addItemToLayout}],execute:function(){e((()=>{var e={39492:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a1.6 1.6 0 0 0-1.6 1.6v4.8H1.6a1.6 1.6 0 1 0 0 3.2h4.8v4.8a1.6 1.6 0 1 0 3.2 0V9.6h4.8a1.6 1.6 0 1 0 0-3.2H9.6V1.6A1.6 1.6 0 0 0 8 0" clip-rule="evenodd"></path></svg>'},49859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M4 4h2v1H4zM8 4h2v1H8zM14 4h-2v1h2zM15 4h1v2h-1zM16 8h-1v2h1zM4 14h1v2H4zM5 6H4v2h1zM4 10h1v2H4zM16 12h-1v2h1zM16 15v1h-2v-1zM12 15h-2v1h2zM6 15h2v1H6z"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path></svg>'},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},79244:e=>{"use strict";e.exports=o},4108:e=>{"use strict";e.exports=n},6055:e=>{"use strict";e.exports=r},14321:e=>{"use strict";e.exports=i}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var d={};return(()=>{"use strict";a.r(d),a.d(d,{default:()=>g});var e,t=a(79244);!function(e){e.Auto="AUTO",e.Custom="CUSTOM"}(e||(e={}));var o=a(14321),i=a(4108),n=a(6055),r=a(49859),l=a.n(r),u=a(23662),p=a.n(u),s=a(39492),v=a.n(s),c=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function d(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,d)}l((i=i.apply(e,t||[])).next())}))};class g{constructor(){this.index=3,this.id="navigator-add-view"}getAppState(){const e=(0,t.getAppStore)().getState();return e.appStateInBuilder?e.appStateInBuilder:e}visible(o){var i,n,r,a,d;const l=o.layoutItem.widgetId,u=(null===(r=null===(n=null===(i=this.getAppState().appConfig.widgets[l])||void 0===i?void 0:i.config)||void 0===n?void 0:n.data)||void 0===r?void 0:r.type)===e.Auto,p=(null===(d=null===(a=this.getAppState())||void 0===a?void 0:a.appRuntimeInfo)||void 0===d?void 0:d.appMode)===t.AppMode.Express;return u&&p}getGroupId(){return null}getTitle(){const e=t.i18n.getIntl("_jimu");return e?e.formatMessage({id:"addView",defaultMessage:o.defaultMessages.addAView}):"Add view"}checked(){return null}getIcon(){return window.jimuConfig.isBuilder?v():p()}getPlaceholderItem(e,o){const n=t.i18n.getIntl("_jimu"),r=n?n.formatMessage({id:"placeholder"}):"Placeholder";return{itemType:t.LayoutItemType.Widget,label:`${r} ${i.placeholderService.getNextPlaceholderId(e)}`,layoutInfo:o,manifest:{defaultSize:{width:300,height:300}},icon:l(),name:"placeholder"}}onClick(e){return c(this,void 0,void 0,(function*(){var o,r,a,d;const l=e.layoutItem.widgetId,{section:u}=null===(r=null===(o=this.getAppState().appConfig.widgets[l])||void 0===o?void 0:o.config)||void 0===r?void 0:r.data;if(!u)return;let p=(0,i.getAppConfigAction)();const s=p.addView(u),v=Object.entries((null===(d=null===(a=p.appConfig.views)||void 0===a?void 0:a[s])||void 0===d?void 0:d.layout)||{});let c,g;for(const[e,o]of v){let{updatedAppConfig:r,layoutInfo:a}=yield(0,n.addItemToLayout)(p.appConfig,{},o);c?r=r.setIn(["placeholderInfos",g.id,"syncs",e],a):(c=a,g=i.placeholderService.getPlaceholderInfo(r,c)),p=(0,i.getAppConfigAction)(r),p.editLayoutItemProperty(a,"type",t.LayoutItemType.Widget,!0).adjustOrderOfItem(a,0,!0).editLayoutItemProperty(a,"bbox",{top:"0%",bottom:"0%",left:"0%",right:"0%",width:"100%",height:"100%"},!0)}p.exec(),t.lodash.defer((()=>{var e,o,n,r;const a=null===(r=null===(n=null===(o=null===(e=this.getAppState())||void 0===e?void 0:e.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===n?void 0:n[u])||void 0===r?void 0:r.currentViewId;if(a!==s){const e={previousViewId:a,currentViewId:s,useProgress:!1};window.jimuConfig.isBuilder?i.builderAppSync.publishSectionNavInfoToApp(u,e):((0,t.getAppStore)().dispatch(t.appActions.sectionNavInfoChanged(u,e)),t.jimuHistory.changeViewBySectionNavInfo(u,e))}}))}))}getSettingPanel(){return null}}})(),d})())}}}));