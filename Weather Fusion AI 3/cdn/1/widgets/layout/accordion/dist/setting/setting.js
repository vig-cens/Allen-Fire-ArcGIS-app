System.register(["jimu-core","jimu-for-builder","jimu-ui","jimu-ui/advanced/style-setting-components","jimu-ui/advanced/setting-components","jimu-ui/basic/color-picker","jimu-theme","jimu-ui/advanced/resource-selector"],(function(e,t){var o={},i={},n={},s={},a={},l={},r={},d={};return{setters:[function(e){o.Immutable=e.Immutable,o.LayoutItemType=e.LayoutItemType,o.React=e.React,o.ReactRedux=e.ReactRedux,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.jsx=e.jsx,o.lodash=e.lodash},function(e){i.getAppConfigAction=e.getAppConfigAction},function(e){n.Checkbox=e.Checkbox,n.CollapsablePanel=e.CollapsablePanel,n.Collapse=e.Collapse,n.DistanceUnits=e.DistanceUnits,n.Icon=e.Icon,n.Label=e.Label,n.MultiSelect=e.MultiSelect,n.Radio=e.Radio,n.Select=e.Select,n.Switch=e.Switch,n.Tooltip=e.Tooltip,n.styleUtils=e.styleUtils},function(e){s.BorderRadiusSetting=e.BorderRadiusSetting,s.BorderSetting=e.BorderSetting,s.InputUnit=e.InputUnit,s.Padding=e.Padding,s.TextStyle=e.TextStyle},function(e){a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection},function(e){l.ThemeColorPicker=e.ThemeColorPicker},function(e){r.getTheme2=e.getTheme2,r.useTheme2=e.useTheme2,r.withTheme=e.withTheme},function(e){d.IconPicker=e.IconPicker}],execute:function(){e((()=>{var e={30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=o},4108:e=>{"use strict";e.exports=i},1888:e=>{"use strict";e.exports=r},14321:e=>{"use strict";e.exports=n},35809:e=>{"use strict";e.exports=d},79298:e=>{"use strict";e.exports=a},15562:e=>{"use strict";e.exports=s},54337:e=>{"use strict";e.exports=l}},t={};function g(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,g),n.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var o in t)g.o(t,o)&&!g.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.p="";var c={};return g.p=window.jimuConfig.baseUrl,(()=>{"use strict";g.r(c),g.d(c,{__set_webpack_public_path__:()=>b,default:()=>x});var e=g(79244),t=g(4108),o=g(14321),i=g(15562),n=g(79298);const s={generalSettigns:"General settings",numOfExpandedItems:"How many items can be expanded",expandOnLoading:"Expand items on loading",expandButton:"Expand button",collapseButton:"Collapse button",togglePosition:"Toggle position",showToggleAllButton:"Expand / Collapse all buttons",content:"Content",bgAndBorder:"Background and border",panel:"Panel",toggleButton:"Toggle button"};var a=g(54337),l=g(1888),r=g(35809),d=g(30655),p=g.n(d);const u=e.css`
  height: 80px;
  color: var(--ref-palette-white);
  text-align: center;
  position: relative;
  cursor: pointer;

  .with-bg {
    background: var(--ref-palette-neutral-300);
    border-radius: 4px;
    &:hover {
      background: var(--sys-color-action-selected-hover);
    }
    &.active {
      background: var(--sys-color-action-selected);
    }
    border: 1px solid var(--sys-color-divider-primary);
  }
  .border-setting {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  .padding-setting {
    border-style: dashed;
    position: absolute;
    top: 13px;
    left: 13px;
    right: 13px;
    bottom: 13px;
  }
  .content-setting {
    position: absolute;
    top: 24px;
    left: 24px;
    right: 24px;
    bottom: 24px;
    .icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
    }
    .label {
      width: 64px;
      height: 10px;
    }
    & > div {
      background: var(--sys-color-action-disabled-text);
    }
    &.active {
      border: none;
    }
    &.active  > div {
      background: var(--sys-color-surface-background);
    }
  }
`;const h=(0,l.withTheme)((function(d){var g,c;const h=e.hooks.useTranslation(s),[m,x]=e.React.useState("content"),b=e.React.useRef(),f=(0,l.useTheme2)(),w=(e,o)=>{(0,t.getAppConfigAction)().editWidgetProperty(d.widgetId,e,o).exec()};return(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:"header-setting w-100 mt-2",css:u,ref:b},(0,e.jsx)(o.Tooltip,{title:h("bgAndBorder")},(0,e.jsx)("div",{className:(0,e.classNames)("border-setting with-bg",{active:"border"===m}),onClick:()=>{x("border")}})),(0,e.jsx)(o.Tooltip,{title:h("padding")},(0,e.jsx)("div",{className:(0,e.classNames)("padding-setting with-bg",{active:"padding"===m}),onClick:()=>{x("padding")}})),(0,e.jsx)(o.Tooltip,{title:h("content")},(0,e.jsx)("div",{className:(0,e.classNames)("content-setting with-bg d-flex justify-content-center align-items-center",{active:"content"===m}),onClick:()=>{x("content")}},(0,e.jsx)("div",{className:"ml-2 icon"}),(0,e.jsx)("div",{className:"ml-2 label"}),(0,e.jsx)(o.Icon,{className:"ml-auto mr-2",color:"content"!==m?"var(--sys-color-action-disabled-text)":"var(--sys-color-surface-background)",icon:p(),size:16})))),"border"===m&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingSection,{title:h("background"),className:"p-0 mt-4 border-bottom-0"},(0,e.jsx)(n.SettingRow,{label:h("collapse")},(0,e.jsx)(a.ThemeColorPicker,{value:d.collapsedColor,specificTheme:f,onChange:e=>{w("config.header.collapsedColor",e)}})),(0,e.jsx)(n.SettingRow,{label:h("expand")},(0,e.jsx)(a.ThemeColorPicker,{value:d.expandedColor,specificTheme:f,onChange:e=>{w("config.header.expandedColor",e)}}))),(0,e.jsx)(n.SettingSection,{title:h("border"),className:"px-0 pt-3 pb-0 border-bottom-0"},(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)(i.BorderSetting,{value:d.border,top:d.borderTop,left:d.borderLeft,right:d.borderRight,bottom:d.borderBottom,onChange:o=>{var i,n;const s=(0,t.getAppConfigAction)(),a=s.appConfig.widgets[d.widgetId],l=null!==(n=null===(i=null==a?void 0:a.config)||void 0===i?void 0:i.header)&&void 0!==n?n:(0,e.Immutable)({});s.editWidgetProperty(d.widgetId,"config.header",l.set("border",o).without("borderLeft").without("borderRight").without("borderTop").without("borderBottom")).exec()},onSideChange:(o,i)=>{var n,s;const a=(0,t.getAppConfigAction)(),l=a.appConfig.widgets[d.widgetId],r=null!==(s=null===(n=null==l?void 0:l.config)||void 0===n?void 0:n.header)&&void 0!==s?s:(0,e.Immutable)({});a.editWidgetProperty(d.widgetId,"config.header",r.set(e.lodash.camelCase(`border-${o}`),i).without("border")).exec()}})),(0,e.jsx)(n.SettingRow,{flow:"wrap",label:h("borderRadius")},(0,e.jsx)(i.BorderRadiusSetting,{value:d.borderRadius,onChange:e=>{w("config.header.borderRadius",e)}})))),"padding"===m&&(0,e.jsx)(n.SettingRow,{className:"mt-4",role:"group","aria-label":h("padding"),label:h("padding"),flow:"wrap"},(0,e.jsx)(i.Padding,{value:d.padding,units:[o.DistanceUnits.PIXEL],min:0,onChange:e=>{w("config.header.padding",{number:o.styleUtils.expandStyleArray(e.number),unit:e.unit})}})),"content"===m&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{label:h("icon"),className:"mt-4"},(0,e.jsx)(o.Switch,{checked:d.showWidgetIcon,"aria-label":h("icon"),onChange:(e,t)=>{w("config.header.showWidgetIcon",t)}})),(0,e.jsx)(o.Collapse,{isOpen:d.showWidgetIcon},(0,e.jsx)(n.SettingRow,{className:"mt-2"},(0,e.jsx)(i.InputUnit,{precision:0,value:`${null!==(g=d.widgetIconSize)&&void 0!==g?g:16}px`,min:8,max:64,onChange:e=>{w("config.header.widgetIconSize",e.distance)}}),(0,e.jsx)(a.ThemeColorPicker,{className:"ml-1",value:d.widgetIconColor,specificTheme:f,onChange:e=>{w("config.header.widgetIconColor",e)}}))),(0,e.jsx)(n.SettingRow,{label:h("text"),flow:"wrap",className:"pt-3"},(0,e.jsx)(i.TextStyle,Object.assign({},d.textStyle,{onChange:(e,t)=>{w(`config.header.textStyle.${e}`,t)}}))),(0,e.jsx)(n.SettingRow,{label:h("expandButton")},(0,e.jsx)(r.IconPicker,{icon:d.expandIcon,configurableOption:"all",setButtonUseColor:!1,previewOptions:{size:!1,color:!0},onChange:e=>{w("config.header.expandIcon",e)}})),(0,e.jsx)(n.SettingRow,{label:h("collapseButton")},(0,e.jsx)(r.IconPicker,{icon:d.collapseIcon,configurableOption:"all",setButtonUseColor:!1,previewOptions:{size:!1,color:!0},onChange:e=>{w("config.header.collapseIcon",e)}})),(0,e.jsx)(n.SettingRow,{flow:"wrap",label:h("togglePosition")},(0,e.jsx)(o.Select,{size:"sm",className:"w-100","aria-label":h("togglePosition"),value:null!==(c=d.togglePosition)&&void 0!==c?c:"right",onChange:e=>{w("config.header.togglePosition",e.target.value)}},(0,e.jsx)("option",{value:"left"},h("start")),(0,e.jsx)("option",{value:"right"},h("end"))))))}));function m(i){const{widgetId:n}=i,s=e.hooks.useTranslation(),a=e.ReactRedux.useSelector((t=>{const o=t.appStateInBuilder.appConfig.widgets[n],i=t.browserSizeMode,s=Object.keys(o.layouts)[0],a=o.layouts[s][i],l=t.appStateInBuilder.appConfig.layouts[a],r=Object.keys((null==l?void 0:l.content)||{}).map((t=>{const o=l.content[t];return o.isPending?"":o.type===e.LayoutItemType.Widget&&o.widgetId?`widget:${o.widgetId}`:o.type===e.LayoutItemType.Section?`section:${o.sectionId}`:""})).filter((e=>""!==e));return r.sort(),r.join(",")})),l=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder.appConfig.widgets[n].config)||void 0===t?void 0:t.expandedItems})),r=e.ReactRedux.useSelector((e=>{var t,o;return null!==(o=null===(t=e.appStateInBuilder.appConfig.widgets[n].config)||void 0===t?void 0:t.singleMode)&&void 0!==o&&o})),d=e.React.useMemo((()=>{if(a.length>0){const t=(0,e.getAppStore)().getState().appStateInBuilder;return a.split(",").map((e=>{const[o,i]=e.split(":");return"widget"===o?{value:i,label:t.appConfig.widgets[i].label}:{value:i,label:t.appConfig.sections[i].label}}))}return[]}),[a]),g=e.React.useMemo((()=>a.split(",").map((e=>e.split(":")[1])).filter((e=>(null==l?void 0:l.length)>0&&l.includes(e)))),[a,l]),c=e.React.useCallback(((e,o,i)=>{(0,t.getAppConfigAction)().editWidgetProperty(n,"config.expandedItems",i).exec()}),[n]),p=e.React.useCallback((e=>{(0,t.getAppConfigAction)().editWidgetProperty(n,"config.expandedItems",[e.target.value]).exec()}),[n]);return r?(0,e.jsx)(o.Select,{size:"sm",css:e.css`.jimu-dropdown { width: 100%; }`,placeholder:s("none"),value:g[0],onChange:p},d.map((t=>(0,e.jsx)("option",{key:t.value,value:t.value},t.label)))):(0,e.jsx)(o.MultiSelect,{size:"sm",css:e.css`.jimu-dropdown { width: 100%; }`,placeholder:s("none"),values:g,items:d,onClickItem:c})}class x extends e.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:s[e]}),this.handlePaddingChange=e=>{const i=o.styleUtils.expandStyleArray(e.number);(0,t.getAppConfigAction)().editWidgetProperty(this.props.id,"config.padding",{number:i,unit:e.unit}).exec()},this.useSingleMode=()=>{(0,t.getAppConfigAction)().editWidgetProperty(this.props.id,"config.singleMode",!0).editWidgetProperty(this.props.id,"config.expandedItems",[]).exec()},this.useMultipleMode=()=>{(0,t.getAppConfigAction)().editWidgetProperty(this.props.id,"config.singleMode",!1).editWidgetProperty(this.props.id,"config.expandedItems",[]).exec()},this.handleConfigChange=(e,o)=>{(0,t.getAppConfigAction)().editWidgetProperty(this.props.id,e,o).exec()},this.handlePanelPaddingChange=e=>{const i=o.styleUtils.expandStyleArray(e.number);(0,t.getAppConfigAction)().editWidgetProperty(this.props.id,"config.panel.padding",{number:i,unit:e.unit}).exec()},this.handlePanelBorderChange=o=>{var i,n;const s=(0,t.getAppConfigAction)(),a=s.appConfig.widgets[this.props.id],l=null!==(n=null===(i=null==a?void 0:a.config)||void 0===i?void 0:i.panel)&&void 0!==n?n:(0,e.Immutable)({});s.editWidgetProperty(this.props.id,"config.panel",l.set("border",o).without("borderLeft").without("borderRight").without("borderTop").without("borderBottom")).exec()},this.handlePanelBorderSideChange=(o,i)=>{var n,s;const a=(0,t.getAppConfigAction)(),l=a.appConfig.widgets[this.props.id],r=null!==(s=null===(n=null==l?void 0:l.config)||void 0===n?void 0:n.panel)&&void 0!==s?s:(0,e.Immutable)({});a.editWidgetProperty(this.props.id,"config.panel",r.set(e.lodash.camelCase(`border-${o}`),i).without("border")).exec()}}render(){const{config:t}=this.props,{gap:s=4,padding:r,singleMode:d=!1,showToggleAll:g=!1,header:c={},panel:p={}}=t,u=(0,l.getTheme2)(),x=window.isExpressBuilder;return(0,e.jsx)("div",null,!x&&(0,e.jsx)(n.SettingSection,{title:this.formatMessage("layout")},(0,e.jsx)(n.SettingRow,{label:this.formatMessage("gap")},(0,e.jsx)(i.InputUnit,{"aria-label":this.formatMessage("gap"),precision:0,value:{distance:s,unit:void 0},min:0,css:e.css`width: 120px;`,onChange:e=>{this.handleConfigChange("config.gap",e.distance)}})),(0,e.jsx)(n.SettingRow,{role:"group","aria-label":this.formatMessage("padding"),label:this.formatMessage("padding"),flow:"wrap"},(0,e.jsx)(i.Padding,{value:r,units:[o.DistanceUnits.PIXEL],min:0,onChange:this.handlePaddingChange}))),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("generalSettigns")},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:this.formatMessage("numOfExpandedItems")},(0,e.jsx)("div",{className:"d-block"},(0,e.jsx)("div",{className:"d-flex align-items-center mb-2"},(0,e.jsx)(o.Label,{className:"d-flex align-items-center"},(0,e.jsx)(o.Radio,{name:"single",className:"mr-2",checked:d,onClick:this.useSingleMode}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("single")))),(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(o.Label,{className:"d-flex align-items-center"},(0,e.jsx)(o.Radio,{name:"multiple",className:"mr-2",checked:!d,onClick:this.useMultipleMode}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("multiple")))))),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("expandOnLoading"),flow:"wrap"},(0,e.jsx)(m,{widgetId:this.props.id})),!d&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(o.Label,{className:"d-flex align-items-center"},(0,e.jsx)(o.Checkbox,{checked:g,onChange:(e,t)=>{this.handleConfigChange("config.showToggleAll",t)}}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("showToggleAllButton"))))),!x&&(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(o.CollapsablePanel,{label:this.formatMessage("variableHeader"),type:"default",defaultIsOpen:!0},(0,e.jsx)(h,Object.assign({widgetId:this.props.id},c)))),!x&&(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(o.CollapsablePanel,{label:this.formatMessage("panel"),type:"default",className:"pb-2",defaultIsOpen:!1},(0,e.jsx)(n.SettingRow,{className:"mt-2",role:"group","aria-label":this.formatMessage("padding"),label:this.formatMessage("padding"),flow:"wrap"},(0,e.jsx)(i.Padding,{value:p.padding,units:[o.DistanceUnits.PIXEL],min:0,onChange:this.handlePanelPaddingChange})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("fill")},(0,e.jsx)(a.ThemeColorPicker,{value:p.backgroundColor,specificTheme:u,onChange:e=>{this.handleConfigChange("config.panel.backgroundColor",e)}})),(0,e.jsx)(n.SettingSection,{title:this.formatMessage("border"),className:"px-0 py-3 border-bottom-0"},(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)(i.BorderSetting,{value:p.border,top:p.borderTop,left:p.borderLeft,right:p.borderRight,bottom:p.borderBottom,onChange:this.handlePanelBorderChange,onSideChange:this.handlePanelBorderSideChange})),(0,e.jsx)(n.SettingRow,{flow:"wrap",label:this.formatMessage("borderRadius")},(0,e.jsx)(i.BorderRadiusSetting,{value:p.borderRadius,onChange:e=>{this.handleConfigChange("config.panel.borderRadius",e)}}))))))}}function b(e){g.p=e}})(),c})())}}}));